# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü–æ–ª—É—á–∏—Ç—å Service Role Key

### –®–∞–≥ 1: –í–æ–π–¥–∏—Ç–µ –≤ Supabase Dashboard
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç–µ Service Role Key
1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É ‚öôÔ∏è **Settings** (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)
2. –í—ã–±–µ—Ä–∏—Ç–µ **API** –≤ –ø–æ–¥–º–µ–Ω—é
3. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **Project API keys**
4. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `service_role` –∏ –Ω–∞–∂–º–∏—Ç–µ **"Reveal"** (–ü–æ–∫–∞–∑–∞—Ç—å)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ...`)

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:
```env
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here
```

–ù–∞:
```env
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...–≤–∞—à_–Ω–∞—Å—Ç–æ—è—â–∏–π_–∫–ª—é—á
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
npm run dev
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/register
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏: "Test Company"
   - Email: test@example.com
   - –ü–∞—Ä–æ–ª—å: password123
3. –ù–∞–∂–º–∏—Ç–µ "Create Account"

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/app` (dashboard)
‚úÖ –í—ã –≤–∏–¥–∏—Ç–µ –¥–∞—à–±–æ—Ä–¥ —Å 4 –ø–ª–∏—Ç–∫–∞–º–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "An unexpected error occurred":
‚ùå Service role key –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. `.env` —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á
2. –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`
3. –ö–ª—é—á –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ` (JWT —Ñ–æ—Ä–º–∞—Ç)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω npm run dev
echo $SUPABASE_SERVICE_ROLE_KEY
```

–ï—Å–ª–∏ –≤—ã–≤–æ–¥ –ø—É—Å—Ç–æ–π –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `your_service_role_key_here` - –∫–ª—é—á –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω.

### –†–µ—à–µ–Ω–∏–µ:
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ `.env` (–Ω–µ `.env.local`)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `Ctrl+C` –∑–∞—Ç–µ–º `npm run dev`
3. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `.env.local` - –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ `.env`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .env (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥)

```env
NEXT_PUBLIC_SUPABASE_URL=https://fykwvlpiwybfixcbrkef.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5a3d2bHBpd3liZml4Y2Jya2VmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY2ODI0NTgsImV4cCI6MjA4MjI1ODQ1OH0.QOT0JSeDgiFOnOSQvZWrx62q5GmCVQIZ1dp6ao2ksPo
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... <-- –í–ê–® –ö–õ–Æ–ß –ó–î–ï–°–¨
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–ù–ò–ö–û–ì–î–ê –ù–ï –ü–£–ë–õ–ò–ö–£–ô–¢–ï** service_role –∫–ª—é—á:
- ‚ùå –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ Git
- ‚ùå –ù–µ –≤—ã–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –Ω–∞ GitHub
- ‚ùå –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

Service role –∫–ª—é—á –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ö–æ–¥–∏—Ç –≤—Å–µ RLS –ø—Ä–∞–≤–∏–ª–∞.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Supabase Dashboard:

### SQL Editor ‚Üí New Query:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT * FROM auth.users ORDER BY created_at DESC LIMIT 1;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ tenant
SELECT * FROM tenants ORDER BY created_at DESC LIMIT 1;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ app_users
SELECT
  au.id,
  au.email,
  au.role,
  t.name as company_name
FROM app_users au
JOIN tenants t ON au.tenant_id = t.id
ORDER BY au.created_at DESC LIMIT 1;
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Å —Ä–æ–ª—å—é ADMIN.

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. "Failed to create workspace"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ tenant
**–†–µ—à–µ–Ω–∏–µ:** Service role key –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### 2. "Failed to create user profile"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ app_users
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è `fix_app_users_schema` –ø—Ä–∏–º–µ–Ω–µ–Ω–∞

### 3. "An unexpected error occurred"
**–ü—Ä–∏—á–∏–Ω–∞:** Service role key = `your_service_role_key_here`
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π –∫–ª—é—á –∏–∑ Dashboard

### 4. –°–µ—Ä–≤–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç .env
**–ü—Ä–∏—á–∏–Ω–∞:** Next.js –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
Ctrl + C

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
npm run dev
```

## –ü–æ–ª—É—á–µ–Ω–∏–µ service_role –∫–ª—é—á–∞ (—Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏)

1. **Dashboard** ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç
2. **Settings** (‚öôÔ∏è –∏–∫–æ–Ω–∫–∞ —Å–ª–µ–≤–∞ –≤–Ω–∏–∑—É)
3. **API** (–≤ –ø–æ–¥–º–µ–Ω—é Settings)
4. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ **Project API keys**
5. –ù–∞–π–¥–∏—Ç–µ `service_role` secret
6. –ù–∞–∂–º–∏—Ç–µ üëÅÔ∏è **Reveal**
7. –ù–∞–∂–º–∏—Ç–µ üìã **Copy**
8. –í—Å—Ç–∞–≤—å—Ç–µ –≤ `.env`

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase Dashboard ‚Üí Logs
